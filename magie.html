<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magie – Projet Croisade</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="responsive.css">
</head>
<body>
  <header>
    <h1>Magie</h1>
    <nav>
      <ul>
        <li><a href="index.html">Accueil</a></li>
        <li><a href="races.html">Races</a></li>
        <li><a href="classes.html">Classes</a></li>
        <li><a href="competences.html">Compétences</a></li>
        <li><a href="metiers.html">Métiers</a></li>
        <li><a href="regles.html">Règles de jeu</a></li>
        <li><a href="infos.html">Informations</a></li>
        <li><a href="magie.html" class="active">Magie</a></li>
        <li><a href="divinites.html">Divinités</a></li>
        <li><a href="documents.html">Documents</a></li>
        <li><a href="fiche.html">Fiche de personnage</a></li>
      </ul>
    </nav>
  </header>

  <main style="display: flex;">
    <aside style="width: 150px; padding: 10px; background-color: #2e2e2e; color: white; position: sticky; top: 0; height: 100vh;">
      <nav>
        <h3 style="color: #ffe48a; text-align: center;">Navigation</h3>
        <ul>
          <li><a href="#niveau1">Niveau 1</a></li>
          <li><a href="#niveau2">Niveau 2</a></li>
          <li><a href="#niveau3">Niveau 3</a></li>
          <li><a href="#niveau4">Niveau 4</a></li>
          <li><a href="#niveau5">Niveau 5</a></li>
        </ul>
      </nav>
    </aside>
    <div style="flex: 1; margin-left: 30px;">
      <section class="codex-magie">
        <h2>Codex de la Magie</h2>
        <a class="btn-metier" href="pierreselementaires.html">Pierres Élémentaires</a>
        <h3>Rappel : Mana / Ferveur : Régénération de base +1 par court repos (15 mins).</h3>
        <h3>Nouveauté : Les sorts de niveau 4 et 5 ne peuvent être lancés en effet de zone (avec le mot Locus / la longue prière).</h3>
        <div class="images-magie">
          <figure><img src="images/codexmagie/codexmagie_1_2.png" alt="Codex Magie pages 1–2"><figcaption>Pages 1–2 du Codex</figcaption></figure>
          <figure><img src="images/codexmagie/codexmagie_3_4.png" alt="Codex Magie pages 3–4"><figcaption>Pages 3–4 du Codex</figcaption></figure>
          <figure><img src="images/codexmagie/codexmagie_5_6.png" alt="Codex Magie pages 5–6"><figcaption>Pages 5–6 du Codex</figcaption></figure>
        </div>
      </section>

      <section class="codex-sorts">
        <h2>Les Sorts</h2>
        <section id="niveau1" class="sorts"><h2>Niveau 1</h2><div id="level-1" class="spell-list"></div></section><section id="niveau2" class="sorts"><h2>Niveau 2</h2><div id="level-2" class="spell-list"></div></section><section id="niveau3" class="sorts"><h2>Niveau 3</h2><div id="level-3" class="spell-list"></div></section><section id="niveau4" class="sorts"><h2>Niveau 4</h2><div id="level-4" class="spell-list"></div></section><section id="niveau5" class="sorts"><h2>Niveau 5</h2><div id="level-5" class="spell-list"></div></section>
      </section>
    </div>
  </main>

  <footer>
    <p>&copy; Projet Croisade - Tous droits réservés</p>
  </footer>

  <button onclick="scrollToTop()" id="btnTop" title="Retour en haut">⬆ Haut</button>

  <script>
  function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }

  async function renderSpellsByLevel() {
    const response = await fetch('data/spells.json');
    const spells = await response.json();
    spells.sort((a, b) => a.name.localeCompare(b.name, 'fr'));

    for (let level = 1; level <= 5; level++) {
      const list = document.getElementById(`level-${level}`);
      if (!list) continue;
      const filtered = spells.filter(s => s.level === level);
      if (filtered.length === 0) {
        list.innerHTML = '<p class="empty">Aucun sort à ce niveau.</p>';
        continue;
      }
      list.innerHTML = filtered.map(spell => `
        <article class="spell">
          <h3>${spell.name}</h3>
          <p><strong>Incantation :</strong> ${spell.incantation}</p>
          <p><strong>Coût :</strong> ${spell.cout}</p>
          <p><strong>Durée :</strong> ${spell.duree}</p>
          ${spell.requis ? `<p><strong>Requis :</strong> ${spell.requis}</p>` : ''}
          <p><strong>Effet :</strong> ${spell.effet}</p>
        </article>
      `).join('');
    }
  }
  renderSpellsByLevel();
  </script>
</body>
</html>
